/* ====== Page Lieux : fix visibilité/contraste des boutons, rangée d’actions, masonry ====== */

.section{padding:4rem 2rem;max-width:1200px;margin:0 auto;color:var(--text-100)}
.section-title{font-size:clamp(1.8rem,3.5vw,2.4rem);text-align:center;color:var(--accent);margin:0 0 1.25rem}

/* Recherche */
.search-filter{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin:0 auto 2rem}
.input-wrap{position:relative}
.input-wrap input{width:320px;max-width:92vw;padding:.8rem 2.8rem .8rem 2.4rem;border-radius:12px;border:1px solid var(--border);background:var(--bg-800);color:var(--text-100);font-size:1rem;transition:border-color .2s}
.input-wrap input:focus{outline:none;border-color:var(--accent)}
.input-wrap svg{position:absolute;left:10px;top:50%;transform:translateY(-50%);width:18px;height:18px;fill:currentColor;color:var(--text-300)}
.clear-btn{position:absolute;right:6px;top:50%;transform:translateY(-50%);width:30px;height:30px;border-radius:50%;border:1px solid var(--border);background:#ffffff10;color:#fff;cursor:pointer}
.search-filter select{width:240px;max-width:92vw;padding:.8rem 1rem;border-radius:12px;border:1px solid var(--border);background:var(--bg-800);color:var(--text-100)}
.results-count{align-self:center;color:var(--text-300);font-size:.95rem}

/* Feed masonry */
#destGrid.feed{margin:0 auto;padding-bottom:3rem}
#destGrid.feed.masonry{column-count:1;column-gap:22px}
@media (min-width:920px){#destGrid.feed.masonry{column-count:2}}
.post{break-inside:avoid;background:#171a20cc;border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);display:inline-block;width:100%;margin:0 0 22px;opacity:0;transform:translateY(16px);transition:transform .35s var(--easing),opacity .35s var(--easing),box-shadow .25s}
.post.in{opacity:1;transform:translateY(0)}
.post:hover{box-shadow:0 16px 40px rgba(0,0,0,.45)}

/* Entête */
.post__header{display:flex;align-items:center;gap:10px;padding:12px 14px}
.post__avatar{width:38px;height:38px;border-radius:50%;display:grid;place-items:center;background:#222831;border:1px solid var(--border);font-weight:700;color:var(--text-100)}
.post__meta{line-height:1.1;display:grid}
.post__title{font-weight:700}
.post__subtitle{font-size:12px;color:var(--text-300)}

/* Media */
.post__media{position:relative;aspect-ratio:16/9;background:#000;overflow:hidden}
.post__media img{width:100%;height:100%;object-fit:cover;transform:scale(1);transition:transform .6s var(--easing)}
.post:hover .post__media img{transform:scale(1.05)}
.post__badge{position:absolute;top:10px;left:10px;background:#ffffff14;border:1px solid var(--border);color:#fff;font-size:12px;padding:6px 10px;border-radius:999px}

/* Actions : >>> verrouillé pour être toujours visible et contrasté <<< */
.post__actions{
  position:relative;
  z-index:1;
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 14px 8px;
  border-top:1px solid var(--border);
  background:linear-gradient(to bottom, #0000, #00000010);
}
.actions-left,.actions-right{display:flex;gap:10px}

/* Boutons */
.post .btn-icon{
  appearance:none;border:1px solid var(--border);
  background:#0c0f14cc; /* fond foncé constant -> contraste */
  color:var(--text-100);
  padding:8px 12px;border-radius:12px;font-weight:700;cursor:pointer;
  display:inline-flex;align-items:center;gap:8px;
  transition:transform .15s,background .2s, color .2s, border-color .2s, box-shadow .2s;
}
.post .btn-icon:hover{transform:translateY(-1px);background:#141a22;box-shadow:0 6px 16px rgba(0,0,0,.35)}
.post .btn-icon svg{width:18px;height:18px;fill:currentColor}
.post .btn-icon .like-count,.post .btn-icon .comment-count{min-width:1ch}

/* État actif -> accent cat + texte blanc (lisible partout) */
.post .btn-icon[aria-pressed="true"]{
  background:color-mix(in srgb, var(--cat, var(--accent)) 72%, #0000);
  border-color:color-mix(in srgb, var(--cat, var(--accent)) 82%, #0000);
  color:#fff;
}

/* Corps */
.post__body{padding:10px 14px 14px;display:grid;gap:10px}
.post__row{display:flex;justify-content:space-between;font-size:14px;color:var(--text-300)}
.post__row strong{color:var(--text-100)}
.stars .star{color:#777}.stars .star.full,.stars .star.half{color:#f6cf47}

/* Commentaires */
.post__comments details{border-top:1px solid var(--border);margin-top:6px;padding-top:6px}
.post__comments summary{cursor:pointer;color:var(--text-100);list-style:none}
.post__comments summary::-webkit-details-marker{display:none}
.comment{margin:8px 0 0;padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:#ffffff08}
.comment small{color:var(--text-300)}
.comment-form{display:grid;gap:8px;margin-top:10px}
.comment-form textarea{resize:vertical;min-height:70px;background:#1116;color:#fff;border:1px solid var(--border);border-radius:10px;padding:10px}
.comment-form button{justify-self:end;border-radius:999px}

/* Couleurs par catégorie */
.post[data-cat="ville"]{--cat:#60a5fa}
.post[data-cat="culture"]{--cat:#f59e0b}
.post[data-cat="musée"]{--cat:#a78bfa}
.post[data-cat="montagne"]{--cat:#34d399}
.post[data-cat="plage"]{--cat:#22d3ee}
.post[data-cat="patrimoine"]{--cat:#f472b6}
.post[data-cat="gastronomie"]{--cat:#ef4444}
.post[data-cat="nature"]{--cat:#10b981}
.post[data-cat="monument"]{--cat:#eab308}

/* Accent grille/badge */
.post{box-shadow:0 0 0 1px color-mix(in srgb, var(--cat, transparent) 35%, transparent), var(--shadow)}
.post__badge{background:color-mix(in srgb, var(--cat, #ffffff) 25%, transparent);border-color:color-mix(in srgb, var(--cat, #ffffff) 35%, transparent)}

/* Overlay carte */
.map-overlay{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.6);display:grid;place-items:center}
.map-overlay[hidden]{display:none}
.map-dialog{width:min(900px,96vw);height:min(600px,80vh);background:var(--bg-800);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);position:relative;overflow:hidden}
.map-close{position:absolute;top:10px;right:10px;width:36px;height:36px;border-radius:50%;border:1px solid var(--border);background:#ffffff14;color:#fff;font-size:22px;cursor:pointer;z-index:2}
.map-canvas{width:100%;height:100%}

/* Sécu : le bouton Publier de la modale reste visible */
.review-form button.btn-pill{display:inline-flex}
